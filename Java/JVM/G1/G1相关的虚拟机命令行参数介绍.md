# G1调优相关的虚拟机命令行参数介绍

Hotspot命令行参数的使用有2种格式：
> * 第一种，如果参数的值是布尔类型，就在参数的前面加“+”或“-”表示真或假。例如-XX:+PrintAdaptiveSizePolicy
表示启用PrintAdaptiveSizePolicy，类似-XX:-PrintAdaptiveSizePolicy参数表示禁用该功能。  

> * 第二种，给数值性参数或指定的关键词列表使用的，此类参数不需要加“+”或“-”符号，例如-XX:ConcGCThreads是数值型参数，可直接使用-XX:ConcGCThreads=6。

<strong>特别说明：<strong>以下提到的参数默认值来自JDK8u45版本。  

### -XX:+UseG1GC  

启用G1垃圾收集器，JDK7和8中需要显式启用，JDK9默认启用。

### -XX:ConcGCThreads  

设定并行执行GC的Java线程数，默认值近似整个应用线程数的四分之一。  

减少该参数值可能提升并行回收的效率，即提高系统的内部吞吐量（系统是一个整体，大家都需要占用CPU资源），不过数值过低，也会导致并行回收机制耗时加长。  

### -XX:G1HeapRegionSize  

设置G1的每个Region的大小，默认为堆内存大小的1/2000，单位为MB，且数值只能是1、2、4、6、8、16、32其中之一。  

如果对象大小超过一个Region的一半，G1需要特别管理此类大对象。增大该值，大对象就可以进入Region，对于有很多大对象的应用有助于提高应用性能，缺点是直接干预了各年龄代的分配大小。  

### -XX:G1HeapWastePercent

G1不会回收的内存大小，默认是堆大小的5%。

GC会收集所有的Region，直到剩余的值达到该参数设定的值，就会停止收集。对于大堆来说，需要降低该值。

### -XX:G1MixedGCCountTarget

设置并行循环之后需要有多少个混合GC启动，默认值为8个。  

老年代Region的回收时间通常会比新生代时间长，所以该参数设置允许更多的混合GC同时回收老年代，同样，增大该参数也会增大GC的启动时间。如果混合GC中断应用的时间太长，可以考虑调大该参数。
