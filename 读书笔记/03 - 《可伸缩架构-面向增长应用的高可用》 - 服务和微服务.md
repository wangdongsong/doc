# 为什么使用服务

服务是为了一个构建某个或更大型产品所提供的功能性、有明确边界的系统。  

在一个面向服务的架构中，单个服务只包含所有业务逻辑的某个子集，这些独立的服务互相连接，为应用程序提供完整的业务逻辑。  

## 单体应用程序

独立的开发团队在相互重叠的部分同时工作，无法确切知道某一个时间点，谁在哪一块上工作，无法控制代码变更所导致的冲突和问题。代码质量及产生的系统质量和可用性也
会受到影响。此外，系统越来越复杂，单个开发团队变更代码也越来越困难，不得面对与其它团队的协作、互相冲突的改动以及内部纠缠不清等问题。  

## 基于服务的应用程序

每个服务都有一个清晰的负责人，并且每个团队都有一个清晰的、无重合的职责范围。面向服务的架构能够将一个应用程序拆分成多个不同的领域，每个领域由单独的团队来负责管理，职责
隔离对于构建大规模应用至关重要。  

构建大规模应用程序时，基于服务的应用提供以下几点好处：  

* 伸缩性决定：从更细粒度考虑伸缩性，进行更为有效的系统和组织优化。
* 团队分配和关注：将任务分配给不同的团队，让各自团队关注系统中不同的可伸缩和高可用需求。
* 复杂的本地化：将各个服务看作一个黑盒，服务的所有者需要了解该服务内部的复杂逻辑。
* 测试：测试比单体应用程序更容易测试。

## 服务所有权

服务约定包含以下两个部分：  

* 服务的能力  
	* 服务的用途
	* 如何调用服务以及每个调用的意义

* 服务的响应
	* API使用的频率
	* 什么时候可以使用API
	* API响应的速度
	* API是否存在依赖


## 规模收益

应用程序的不同部分在伸缩性上有着不同的需求，例如：生成首页的组件会比生成用户设置页面的组件会更频繁的使用到。通过独立管理每个服务的伸缩性需求，可以实现以下几点：

* 通过与相关功能负责团队的密切合作，提供更加准确的可伸缩性。
* 将系统资源留给真正需要伸缩性的组件。
* 将伸缩性的决定树交回团队，因为团队才是最了解服务需求的人（服务所有者）。

# 使用微服务

每个服务都是一个独立的组件，“独立”很重要，独立的服务必须满足以下几个条件：

* 维护自己的代码库：服务拥有自己的代码库，且区别于其它服务的代码库。
* 管理自己的数据：服务需要管理其自身数据的状态。服务之间唯一能访问到数据的方式就是通过它定义的API，其它服务不能够直接接触当前服务的数据或状态信息。
* 向其它服务提供能力：服务有一个定义良好的能力集合，并将这些能力提供给系统的中其它服务。
* 消费其它服务的能力：服务按标准的、约定的方式，使用其它服务提供的能力。
* 单一所有者：每个服务只能由一个开发团队负责和维护。虽然一个团队可以负责和维护多个服务。

## 如何定义服务

如何定义服务？没有唯一答案，整个行业在向着更小的微服务的趋势发展。Docker技术使得这些大量的微服务成为一种可能的系统拓扑。

## 深入了解服务

以下原则可以用来确定服务边界，切忌是原则，不是规则。

* 特定的业务需求：是否有特定的业务需求会影响服务的边界，例如：会计、安全或监管。
* 清晰和独立的团队所有权：负责该功能的团队是否清晰和独立。
* 天然隔离的数据：其管理的数据是否天然地与系统的其它数据相对独立？将数据放到一个单独的数据存储器中是否会对系统造成过大压力。
* 共享的能力/数据：它是否提供了一些被其它服务使用的共享能力，是否这些共享能力需要共享数据？

## 原则1：特定的业务需求
